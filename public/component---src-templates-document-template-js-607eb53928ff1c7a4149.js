"use strict";(self.webpackChunkgatsby_starter_default=self.webpackChunkgatsby_starter_default||[]).push([[43],{9726:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var r=n(7326),a=n(1721),i=n(5861),o=n(7757),s=n.n(o),c=n(7294),l=n(1407),d=n(3332),m=n(7462),u=n(5987),f=n(5505),p=n(4364),h=n(1664),g=44,x=c.forwardRef((function(e,t){var n=e.classes,r=e.className,a=e.color,i=void 0===a?"primary":a,o=e.disableShrink,s=void 0!==o&&o,l=e.size,d=void 0===l?40:l,p=e.style,x=e.thickness,v=void 0===x?3.6:x,y=e.value,k=void 0===y?0:y,b=e.variant,w=void 0===b?"indeterminate":b,C=(0,u.Z)(e,["classes","className","color","disableShrink","size","style","thickness","value","variant"]),Z={},E={},S={};if("determinate"===w||"static"===w){var D=2*Math.PI*((g-v)/2);Z.strokeDasharray=D.toFixed(3),S["aria-valuenow"]=Math.round(k),Z.strokeDashoffset="".concat(((100-k)/100*D).toFixed(3),"px"),E.transform="rotate(-90deg)"}return c.createElement("div",(0,m.Z)({className:(0,f.Z)(n.root,r,"inherit"!==i&&n["color".concat((0,h.Z)(i))],{determinate:n.determinate,indeterminate:n.indeterminate,static:n.static}[w]),style:(0,m.Z)({width:d,height:d},E,p),ref:t,role:"progressbar"},S,C),c.createElement("svg",{className:n.svg,viewBox:"".concat(22," ").concat(22," ").concat(g," ").concat(g)},c.createElement("circle",{className:(0,f.Z)(n.circle,s&&n.circleDisableShrink,{determinate:n.circleDeterminate,indeterminate:n.circleIndeterminate,static:n.circleStatic}[w]),style:Z,cx:g,cy:g,r:(g-v)/2,fill:"none",strokeWidth:v})))})),v=(0,p.Z)((function(e){return{root:{display:"inline-block"},static:{transition:e.transitions.create("transform")},indeterminate:{animation:"$circular-rotate 1.4s linear infinite"},determinate:{transition:e.transitions.create("transform")},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{display:"block"},circle:{stroke:"currentColor"},circleStatic:{transition:e.transitions.create("stroke-dashoffset")},circleIndeterminate:{animation:"$circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},circleDeterminate:{transition:e.transitions.create("stroke-dashoffset")},"@keyframes circular-rotate":{"0%":{transformOrigin:"50% 50%"},"100%":{transform:"rotate(360deg)"}},"@keyframes circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},circleDisableShrink:{animation:"none"}}}),{name:"MuiCircularProgress",flip:!1})(x),y=n(2468),k=n(9952),b=n(5733),w=n(6422),C=[0,1,2,3,4,5,6,7,8,9,10],Z=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(e);return"".concat(n/t).concat(String(e).replace(String(n),"")||"px")}var S=c.forwardRef((function(e,t){var n=e.alignContent,r=void 0===n?"stretch":n,a=e.alignItems,i=void 0===a?"stretch":a,o=e.classes,s=e.className,l=e.component,d=void 0===l?"div":l,p=e.container,h=void 0!==p&&p,g=e.direction,x=void 0===g?"row":g,v=e.item,y=void 0!==v&&v,k=e.justify,b=e.justifyContent,w=void 0===b?"flex-start":b,C=e.lg,Z=void 0!==C&&C,E=e.md,S=void 0!==E&&E,D=e.sm,M=void 0!==D&&D,N=e.spacing,I=void 0===N?0:N,T=e.wrap,R=void 0===T?"wrap":T,W=e.xl,j=void 0!==W&&W,A=e.xs,V=void 0!==A&&A,B=e.zeroMinWidth,z=void 0!==B&&B,P=(0,u.Z)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),$=(0,f.Z)(o.root,s,h&&[o.container,0!==I&&o["spacing-xs-".concat(String(I))]],y&&o.item,z&&o.zeroMinWidth,"row"!==x&&o["direction-xs-".concat(String(x))],"wrap"!==R&&o["wrap-xs-".concat(String(R))],"stretch"!==i&&o["align-items-xs-".concat(String(i))],"stretch"!==r&&o["align-content-xs-".concat(String(r))],"flex-start"!==(k||w)&&o["justify-content-xs-".concat(String(k||w))],!1!==V&&o["grid-xs-".concat(String(V))],!1!==M&&o["grid-sm-".concat(String(M))],!1!==S&&o["grid-md-".concat(String(S))],!1!==Z&&o["grid-lg-".concat(String(Z))],!1!==j&&o["grid-xl-".concat(String(j))]);return c.createElement(d,(0,m.Z)({className:$,ref:t},P))})),D=(0,p.Z)((function(e){return(0,m.Z)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},function(e,t){var n={};return C.forEach((function(r){var a=e.spacing(r);0!==a&&(n["spacing-".concat(t,"-").concat(r)]={margin:"-".concat(E(a,2)),width:"calc(100% + ".concat(E(a),")"),"& > $item":{padding:E(a,2)}})})),n}(e,"xs"),e.breakpoints.keys.reduce((function(t,n){return function(e,t,n){var r={};Z.forEach((function(e){var t="grid-".concat(n,"-").concat(e);if(!0!==e)if("auto"!==e){var a="".concat(Math.round(e/12*1e8)/1e6,"%");r[t]={flexBasis:a,flexGrow:0,maxWidth:a}}else r[t]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};else r[t]={flexBasis:0,flexGrow:1,maxWidth:"100%"}})),"xs"===n?(0,m.Z)(e,r):e[t.breakpoints.up(n)]=r}(t,e,n),t}),{}))}),{name:"MuiGrid"})(S),M=D,N=n(791),I=n(7826),T=n(1008),R=n(1291),W=n(8582),j=n(3935),A="undefined"==typeof window?c.useEffect:c.useLayoutEffect,V=c.forwardRef((function(e,t){var n=e.alignItems,r=void 0===n?"center":n,a=e.autoFocus,i=void 0!==a&&a,o=e.button,s=void 0!==o&&o,l=e.children,d=e.classes,p=e.className,h=e.component,g=e.ContainerComponent,x=void 0===g?"li":g,v=e.ContainerProps,y=(v=void 0===v?{}:v).className,k=(0,u.Z)(v,["className"]),b=e.dense,w=void 0!==b&&b,C=e.disabled,Z=void 0!==C&&C,E=e.disableGutters,S=void 0!==E&&E,D=e.divider,M=void 0!==D&&D,N=e.focusVisibleClassName,V=e.selected,B=void 0!==V&&V,z=(0,u.Z)(e,["alignItems","autoFocus","button","children","classes","className","component","ContainerComponent","ContainerProps","dense","disabled","disableGutters","divider","focusVisibleClassName","selected"]),P=c.useContext(W.Z),$={dense:w||P.dense||!1,alignItems:r},L=c.useRef(null);A((function(){i&&L.current&&L.current.focus()}),[i]);var K=c.Children.toArray(l),O=K.length&&(0,T.Z)(K[K.length-1],["ListItemSecondaryAction"]),F=c.useCallback((function(e){L.current=j.findDOMNode(e)}),[]),G=(0,R.Z)(F,t),_=(0,m.Z)({className:(0,f.Z)(d.root,p,$.dense&&d.dense,!S&&d.gutters,M&&d.divider,Z&&d.disabled,s&&d.button,"center"!==r&&d.alignItemsFlexStart,O&&d.secondaryAction,B&&d.selected),disabled:Z},z),H=h||"li";return s&&(_.component=h||"div",_.focusVisibleClassName=(0,f.Z)(d.focusVisible,N),H=I.Z),O?(H=_.component||h?H:"div","li"===x&&("li"===H?H="div":"li"===_.component&&(_.component="div")),c.createElement(W.Z.Provider,{value:$},c.createElement(x,(0,m.Z)({className:(0,f.Z)(d.container,y),ref:G},k),c.createElement(H,_,K),K.pop()))):c.createElement(W.Z.Provider,{value:$},c.createElement(H,(0,m.Z)({ref:G},_),K))})),B=(0,p.Z)((function(e){return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,"&$focusVisible":{backgroundColor:e.palette.action.selected},"&$selected, &$selected:hover":{backgroundColor:e.palette.action.selected},"&$disabled":{opacity:.5}},container:{position:"relative"},focusVisible:{},dense:{paddingTop:4,paddingBottom:4},alignItemsFlexStart:{alignItems:"flex-start"},disabled:{},divider:{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},gutters:{paddingLeft:16,paddingRight:16},button:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},secondaryAction:{paddingRight:48},selected:{}}}),{name:"MuiListItem"})(V),z=n(453),P=c.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,i=e.disableTypography,o=void 0!==i&&i,s=e.inset,l=void 0!==s&&s,d=e.primary,p=e.primaryTypographyProps,h=e.secondary,g=e.secondaryTypographyProps,x=(0,u.Z)(e,["children","classes","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]),v=c.useContext(W.Z).dense,y=null!=d?d:n;null==y||y.type===z.Z||o||(y=c.createElement(z.Z,(0,m.Z)({variant:v?"body2":"body1",className:r.primary,component:"span",display:"block"},p),y));var k=h;return null==k||k.type===z.Z||o||(k=c.createElement(z.Z,(0,m.Z)({variant:"body2",className:r.secondary,color:"textSecondary",display:"block"},g),k)),c.createElement("div",(0,m.Z)({className:(0,f.Z)(r.root,a,v&&r.dense,l&&r.inset,y&&k&&r.multiline),ref:t},x),y,k)})),$=(0,p.Z)({root:{flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},multiline:{marginTop:6,marginBottom:6},dense:{},inset:{paddingLeft:56},primary:{},secondary:{}},{name:"MuiListItemText"})(P),L=n(8063),K=n(2608),O=n(581),F="undefined"!=typeof window;F&&(window.showComments=function(){var e=(0,i.Z)(s().mark((function e(t){var n,r=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("showComments()",t),this.currentMarkerKey=t,e.next=4,O.c$(t);case 4:n=e.sent,console.log("showComments(): markedData",n),this.currentMarkerText=n.markerText,this.state.comments.length=0,this.state.addCommentButtonDisabled=!1,n.comments.forEach((function(e){return r.state.comments.push(e)})),this.state.comments.reverse(),console.log("showComments(): state",this.state),this.setState((function(e,t){return r.state}));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),window.maskScreen=function(e){var t=this;this.state.spinnerVisible=e,this.setState((function(e,n){return t.state}))});var G=function(e){function t(t){var n;return n=e.call(this,t)||this,F&&(window.showComments=window.showComments.bind((0,r.Z)(n)),window.maskScreen=window.maskScreen.bind((0,r.Z)(n))),n.mr=t.data.markdownRemark,n.currentMarkerKey=null,n.currentMarkerText="",n.state={addCommentButtonDisabled:!0,addCommentDialogVisible:!1,newComment:"",comments:[],spinnerVisible:!1},n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.loadMarkers()},n.addMarker=function(){var e=(0,i.Z)(s().mark((function e(){var t,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("addMarker()"),t=null,0!==window.getSelection().rangeCount&&(t=window.getSelection().getRangeAt(0)),t){e.next=5;break}return e.abrupt("return");case 5:return console.log("addMarker(): range",t),n={startOffset:t.startOffset,endOffset:t.endOffset,parentNodeData:t.startContainer.data,markerText:t.toString(),comments:[]},console.log("addMarker(): marker",n),r=this.mr.frontmatter.id+"-"+(new Date).getTime(),e.next=11,O.R1(r,n);case 11:return document.getSelection().removeAllRanges(),e.next=14,this.linkifyMarker(r);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.linkifyMarker=function(){var e=(0,i.Z)(s().mark((function e(t){var n,r,a,i,o,c,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("linkifyMarker()",t),e.next=3,O.c$(t);case 3:for(n=e.sent,console.log("linkifyMarker(): marker",n),r=[],a=document.body.childNodes[0];null!=a;)if(3===a.nodeType&&r.push(a),a.hasChildNodes())a=a.firstChild;else{for(;null==a.nextSibling&&a!==document.body;)a=a.parentNode;a=a.nextSibling}i=null,o=0;case 10:if(!(o<r.length)){e.next=17;break}if(r[o].data!==n.parentNodeData){e.next=14;break}return i=r[o],e.abrupt("break",17);case 14:o++,e.next=10;break;case 17:(c=document.createRange()).setStart(i,n.startOffset),c.setEnd(i,n.endOffset),(l=document.createElement("a")).setAttribute("href","#"),l.setAttribute("onClick",'window.showComments("'+t+'");'),c.surroundContents(l),document.getSelection().removeAllRanges();case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.loadMarkers=function(){var e=(0,i.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("loadMarkers()"),t=this,e.next=4,O.Ge(this.mr.frontmatter.id);case 4:n=e.sent,console.log("loadMarkers(): markerKeys",n),n.forEach((function(e){console.log("loadMarkers(): inKey="+e),t.linkifyMarker(e)}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.addComment=function(){var e=this;console.log("addComment()"),this.state.addCommentDialogVisible=!0,this.state.newComment="",this.setState((function(t,n){return e.state}))},n.handleDialogClose=function(){var e=this;console.log("handleDialogClose()"),this.state.addCommentDialogVisible=!1,this.setState((function(t,n){return e.state}))},n.handleDialogSave=function(){var e=(0,i.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("handleDialogSave()"),this.handleDialogClose(),null!==this.state.newComment&&""!==this.state.newComment.trim()){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,O.c$(this.currentMarkerKey);case 6:return(t=e.sent).comments.push({author:localStorage.getItem("username"),dateTime:(new Date).toLocaleDateString(),comment:this.state.newComment}),e.next=10,O.R1(this.currentMarkerKey,t);case 10:if(!F){e.next=13;break}return e.next=13,window.showComments(this.currentMarkerKey);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.render=function(){var e=this;return c.createElement("div",{style:{display:"flex",flexDirection:"column",height:"96vh"}},c.createElement(y.Z,{open:this.state.addCommentDialogVisible,onClose:this.handleDialogClose.bind(this),maxWidth:"lg",fullWidth:!0},c.createElement(w.Z,null,"Add Comment"),c.createElement(b.Z,null,c.createElement(K.Z,{label:"Enter comment here",fullWidth:!0,variant:"outlined",onChange:function(t){return e.state.newComment=t.target.value}})),c.createElement(k.Z,null,c.createElement(d.Z,{onClick:this.handleDialogClose.bind(this),color:"secondary"},"Cancel"),c.createElement(d.Z,{onClick:this.handleDialogSave.bind(this),color:"primary"},"Save"))),c.createElement(l.Z,{style:{color:"#ffffff",zIndex:"999"},open:this.state.spinnerVisible},c.createElement(v,{color:"inherit"})),c.createElement(L.Z,{elevation:5,style:{margin:"10px",padding:"4px",height:"46px"}},c.createElement(M,{container:!0},c.createElement(M,{item:!0},c.createElement(d.Z,{variant:"contained",color:"primary",style:{marginRight:"10px"},onClick:function(){return window.location="/"}},"Document List"),c.createElement(d.Z,{variant:"contained",color:"secondary",style:{marginRight:"10px"},onClick:this.addMarker.bind(this)},"Add Marker"),c.createElement(d.Z,{variant:"contained",style:{marginRight:"10px"},onClick:this.addComment.bind(this),disabled:this.state.addCommentButtonDisabled},"Add Comment")))),c.createElement(L.Z,{elevation:5,style:{margin:"10px",padding:"4px",height:"70vh",overflow:"auto"}},c.createElement(M,{container:!0},c.createElement(M,{item:!0},c.createElement("div",{dangerouslySetInnerHTML:{__html:this.mr.html}})))),c.createElement(L.Z,{elevation:5,style:{margin:"10px",padding:"4px",height:"30vh",overflow:"auto"}},c.createElement("div",{style:{fontWeight:"bold",position:"sticky",top:"2px",padding:"10px",backgroundColor:"#eaeaea",zIndex:99}},this.currentMarkerText),c.createElement(M,{container:!0},c.createElement(M,{item:!0,xs:!0},c.createElement(N.Z,null,null!==this.currentMarkerKey&&0===this.state.comments.length?c.createElement(B,{key:0},c.createElement($,{primary:"No comments for this marker"})):this.state.comments.map((function(e,t){return c.createElement(B,{key:t},c.createElement($,{primary:e.comment,secondary:e.author+" - "+e.dateTime}))})))))))},t}(c.Component)}}]);
//# sourceMappingURL=component---src-templates-document-template-js-607eb53928ff1c7a4149.js.map